{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Langchain-chatchat\u670d\u52a1\u90e8\u7f72\u6587\u6863 \u6982\u8ff0 Langchain-chatchat\u670d\u52a1\u57fa\u4e8e\u5f00\u6e90\u672c\u5730\u77e5\u8bc6\u5e93\u95ee\u7b54\u9879\u76ee Langchain-Chatchat , \u96c6\u6210\u4e86\u963f\u91cc\u4e91\u63a8\u7406\u5f15\u64ceDeepGPU-LLM\uff0cAnalyticDB for PostgreSQL\u5411\u91cf\u6570\u4ed3\u7b49\u4ea7\u54c1\uff0c\u5feb\u901f\u6784\u5efa\u68c0\u7d22\u589e\u5f3a\u751f\u6210(RAG)\u5927\u6a21\u578b\u77e5\u8bc6\u5e93\u9879\u76ee\u3002 \u672c\u6587\u5411\u60a8\u4ecb\u7ecd\u5982\u4f55\u5f00\u901a\u8ba1\u7b97\u5de2\u4e0a\u7684 Demo \u670d\u52a1\uff0c\u4ee5\u53ca\u90e8\u7f72\u6d41\u7a0b\u548c\u4f7f\u7528\u8bf4\u660e\u3002 \u6ce8\u610f\u4e8b\u9879 \u963f\u91cc\u4e91\u4e0d\u5bf9\u7b2c\u4e09\u65b9\u6a21\u578b\u7684\u5408\u6cd5\u6027\u3001\u5b89\u5168\u6027\u3001\u51c6\u786e\u6027\u8fdb\u884c\u4efb\u4f55\u4fdd\u8bc1\uff0c\u963f\u91cc\u4e91\u4e0d\u5bf9\u7531\u6b64\u5f15\u53d1\u7684\u4efb\u4f55\u635f\u5bb3\u627f\u62c5\u8d23\u4efb\u3002 \u60a8\u5e94\u81ea\u89c9\u9075\u5b88\u7b2c\u4e09\u65b9\u6a21\u578b\u7684\u7528\u6237\u534f\u8bae\u3001\u4f7f\u7528\u89c4\u8303\u548c\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u5e76\u5c31\u4f7f\u7528\u7b2c\u4e09\u65b9\u6a21\u578b\u7684\u5408\u6cd5\u6027\u3001\u5408\u89c4\u6027\u81ea\u884c\u627f\u62c5\u76f8\u5173\u8d23\u4efb\u3002 \u90e8\u7f72\u67b6\u6784 Langchain-chatchat\u7531Nginx\u3001Chat\u53caLLM\u7ec4\u6210\u3002 Nginx\uff1a\u7f51\u5173\u670d\u52a1\uff0c\u8d1f\u8d23\u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230Chat\u670d\u52a1\u3002 Chat\uff1aChatBot\u5e94\u7528\uff0c\u652f\u6301LLM\u95ee\u7b54\u548c\u77e5\u8bc6\u5e93\u95ee\u7b54\u3002Database\u7528\u4e8e\u5b58\u50a8\u77e5\u8bc6\u5e93Embedding\u540e\u7684\u5411\u91cf\u3002Database\u652f\u6301 faiss \u53ca ADB \u4e24\u79cd\u7c7b\u578b\u3002 LLM\uff1a\u6a21\u578b\u63a8\u7406\u670d\u52a1\uff0c\u57fa\u4e8e\u5f00\u6e90\u7684FastChat\u9879\u76ee\u90e8\u7f72LLM\u6a21\u578b\u3002\u9ed8\u8ba4\u4f7f\u7528DeepGPU-LLM\u52a0\u901f\u63a8\u7406\u7684qwen-7b-chat-aiacc\u6a21\u578b\u3002\u652f\u6301\u66ff\u6362\u4e3a\u5176\u4ed6\u5f00\u6e90\u6a21\u578b\u6216DeepGPU-LLM\u52a0\u901f\u6a21\u578b\uff0c\u66ff\u6362\u6a21\u578b\u53ef\u901a\u8fc7pvc\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u3002 \u5e94\u7528\u914d\u7f6e \u90e8\u7f72\u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u63cf\u8ff0 \u9ed8\u8ba4\u503c ACK\u96c6\u7fa4ID ACK\u96c6\u7fa4ID \u65e0 \u6570\u636e\u5e93\u7c7b\u578b \u5411\u91cf\u6570\u636e\u5e93\u7c7b\u578b\u3002\u53d6\u503c\uff1afaiss or adb\u3002 faiss \u5e94\u7528\u767b\u9646\u540d Nginx\u767b\u9646\u540d\u79f0 admin \u5e94\u7528\u767b\u9646\u5bc6\u7801 Nginx\u767b\u9646\u5bc6\u7801 \u65e0 \u5e94\u7528\u767d\u540d\u5355 \u53ef\u4ee5\u8bbf\u95ee\u5e94\u7528\u7684IP\u6216\u8005CIDR\u7f51\u6bb5\u3002 127.0.0.1 \u6a21\u578b\u540d\u79f0 llm\u6a21\u578b\u540d\u79f0 qwen-7b-chat-aiacc \u662f\u5426\u4f7f\u7528\u91cf\u5316(8bit) llm\u6a21\u578bint8\u91cf\u5316 true \u6a21\u578bPVC \u6a21\u578b\u5b58\u50a8PVC\uff0c\u6302\u8f7d\u5230\u5bb9\u5668\u5185/llm-model\u76ee\u5f55 true \u77e5\u8bc6\u5e93PVC \u5df2\u5b58\u5728\u7684PVC\uff0c\u7528\u4e8e\u4fdd\u5b58\u672c\u5730\u77e5\u8bc6\u5e93\u6587\u4ef6\u3002\u5982\u4f7f\u7528 \u65e0 \u5b9e\u4f8b\u7c7b\u578b \u6a21\u578b\u63a8\u7406\u670d\u52a1\u90e8\u7f72\u65b9\u5f0f\uff0c\u53d6\u503c\uff1aecs or eci\u3002ecs\u5c06\u5e94\u7528\u90e8\u7f72\u5230ECS\u8282\u70b9\u4e0a\u3002eci\u5c06\u90e8\u7f72\u5230ECI\u4e0a\uff08ACK Serverless\u96c6\u7fa4\u8bf7\u4f7f\u7528eci\uff09\u3002 ecs \u4fee\u6539\u5e94\u7528\u767d\u540d\u5355 \u5e94\u7528\u767d\u540d\u5355\u9ed8\u8ba4\u503c\u4e3a127.0.0.1\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4fee\u6539\u3002 \u65b0\u5efa\u670d\u52a1 \u521b\u5efa\u670d\u52a1\u65f6\u53ef\u4ee5\u6307\u5b9a\u5e94\u7528\u767d\u540d\u5355\u53c2\u6570\uff0c\u5efa\u8bae\u6dfb\u52a0\u672c\u673a\u516c\u7f51\u51fa\u53e3\u5730\u5740\uff08\u53ef\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95eeifconfig.me\u3001myip.ipip.net\u83b7\u53d6\uff09\uff0c\u5426\u5219\u672c\u673a\u5c06\u65e0\u6cd5\u8bbf\u95ee\u670d\u52a1\u3002 \u5df2\u6709\u670d\u52a1 \u5982\u679c\u670d\u52a1\u5df2\u7ecf\u521b\u5efa\uff0c\u53ef\u4ee5\u5728\u670d\u52a1\u6982\u89c8\u9875\u9762 > \u5b9e\u4f8b\u4fe1\u606f\u70b9\u51fbSLBACL\u94fe\u63a5\u8fdb\u884c\u4fee\u6539\u3002SLBACL\u914d\u7f6e\u53ef\u53c2\u8003 \u8bbf\u95ee\u63a7\u5236 \u3002 \u5411\u91cf\u6570\u636e\u5e93 faiss faiss\u662f\u7531facebook\u5f00\u6e90\u7684\u4e00\u6b3e\u5185\u5b58\u5411\u91cf\u5e93\uff0c\u9879\u76ee\u5730\u5740 https://github.com/facebookresearch/faiss \u3002 faiss\u5185\u5b58\u6570\u636e\u5e93\u90e8\u7f72\u5728chat pod\u4e2d\uff0c\u53d7chat pod\u7684\u8d44\u6e90\u7ea6\u675f\u3002\u5982\u679c\u4f7f\u7528faiss\u5411\u91cf\u6570\u636e\u5e93\uff0c\u5efa\u8bae\u589e\u52a0chat pod\u7684\u5185\u5b58\u8d44\u6e90\u3002 AnalyticDB PostgreSQL (\u7b80\u79f0 ADB) \u4e91\u539f\u751f\u6570\u636e\u4ed3\u5e93AnalyticDB PostgreSQL\u7248\u662f\u4e00\u79cd\u5927\u89c4\u6a21\u5e76\u884c\u5904\u7406\uff08MPP\uff09\u6570\u636e\u4ed3\u5e93\u670d\u52a1\uff0c\u53ef\u63d0\u4f9b\u6d77\u91cf\u6570\u636e\u5728\u7ebf\u5206\u6790\u670d\u52a1\u3002\u4ea7\u54c1\u7b80\u4ecb\u8bf7\u53c2\u8003\u6587\u6863 \u4ec0\u4e48\u662f\u4e91\u539f\u751f\u6570\u636e\u4ed3\u5e93 \u3002 Langchain-chatchat\u9879\u76ee\u4e2d\u4f7f\u7528\u7684ADB\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u9700\u5f00\u542f\u5411\u91cf\u5f15\u64ce\u4f18\u5316\u529f\u80fd \u8ba1\u7b97\u8282\u70b9\u89c4\u683c>=4C16G embedding\u6a21\u578b \u5e94\u7528\u5185\u7f6e\u7684embedding\u6a21\u578b\u4e3atext2vec-bge-large-chinese\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003 hugging face\u6587\u6863 \u3002 chat\u5e94\u7528\u9ed8\u8ba4\u4f7f\u7528CPU\u8fd0\u884cembedding\u6a21\u578b\uff0c\u53ef\u901a\u8fc7\u5728 chat.pod.resources \u4e2d\u7533\u8bf7GPU\u8d44\u6e90\u6765\u63d0\u9ad8\u6587\u672c\u5411\u91cf\u5316\u901f\u5ea6\u3002 \u6a21\u578b\u914d\u7f6e \u652f\u6301\u7684\u6a21\u578b\u5217\u8868 \u6a21\u578b\u7c7b\u578b \u6a21\u578b\u540d\u79f0 \u5bb9\u5668\u5185\u6a21\u578b\u6587\u4ef6\u8def\u5f84 DeepGPU-LLM\u8f6c\u6362\u6a21\u578b qwen-7b-chat-aiacc /llm-model/qwen-7b-chat-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b qwen-14b-chat-aiacc /llm-model/qwen-14b-chat-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b chatglm2-6b-aiacc /llm-model/chatglm2-6b-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b baichuan2-7b-chat-aiacc /llm-model/baichuan2-7b-chat-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b baichuan2-13b-chat-aiacc /llm-model/baichuan2-13b-chat-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b llama-2-7b-hf-aiacc /llm-model/llama-2-7b-hf-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b llama-2-13b-hf-aiacc /llm-model/llama-2-13b-hf-aiacc \u5f00\u6e90\u6a21\u578b qwen-7b-chat /llm-model/Qwen-7B-Chat \u5f00\u6e90\u6a21\u578b qwen-14b-chat /llm-model/Qwen-14B-Chat \u5f00\u6e90\u6a21\u578b chatglm2-6b /llm-model/chatglm2-6b \u5f00\u6e90\u6a21\u578b chatglm2-6b-32k /llm-model/chatglm2-6b-32k \u5f00\u6e90\u6a21\u578b baichuan2-7b-chat /llm-model/Baichuan2-7B-Chat \u5f00\u6e90\u6a21\u578b baichuan2-13b-chat /llm-model/Baichuan2-13B-Chat \u5f00\u6e90\u6a21\u578b llama-2-7b-hf /llm-model/Llama-2-7b-hf \u5f00\u6e90\u6a21\u578b llama-2-13b-hf /llm-model/Llama-2-13b-hf \u4f7f\u7528DeepGPU-LLM\u8f6c\u6362\u6a21\u578b DeepGPU-LLM \u662f\u963f\u91cc\u4e91\u7814\u53d1\u7684\u57fa\u4e8eGPU\u4e91\u670d\u52a1\u5668\u7684\u5927\u8bed\u8a00\u6a21\u578b\uff08Large Language Model\uff0cLLM\uff09\u63a8\u7406\u5f15\u64ce\uff0c\u65e8\u5728\u4f18\u5316\u5927\u8bed\u8a00\u6a21\u578b\u5728GPU\u4e91\u670d\u52a1\u5668\u4e0a\u7684\u63a8\u7406\u8fc7\u7a0b\uff0c\u901a\u8fc7\u4f18\u5316\u548c\u5e76\u884c\u8ba1\u7b97\u7b49\u6280\u672f\u624b\u6bb5\uff0c\u63d0\u4f9b\u514d\u8d39\u7684\u9ad8\u6027\u80fd\u3001\u4f4e\u5ef6\u8fdf\u63a8\u7406\u670d\u52a1\u3002DeepGPU-LLM\u4f7f\u7528\u65b9\u5f0f\u8bf7\u53c2\u8003\u6587\u6863 \u4f7f\u7528DeepGPU-LLM\u5b9e\u73b0\u5927\u8bed\u8a00\u6a21\u578b\u5728GPU\u4e0a\u7684\u63a8\u7406\u4f18\u5316 \u3002 Langchain-chatchat\u9879\u76ee\u5df2\u5b89\u88c5DeepGPU-LLM\uff0c\u9ed8\u8ba4\u4f7f\u7528DeepGPU-LLM\u52a0\u901f\u540e\u7684\u6a21\u578bqwen-7b-chat-aiacc\u3002 \u5982\u60f3\u8981\u4f7f\u7528DeepGPU-LLM\u5bf9\u5176\u4ed6\u5f00\u6e90LLM\u6a21\u578b\u8fdb\u884c\u63a8\u7406\u4f18\u5316\uff0c\u60a8\u9700\u8981\u5148\u5c06huggingface\u683c\u5f0f\u7684\u5f00\u6e90\u6a21\u578b\u8f6c\u6362\u4e3aDeepGPU-LLM\u652f\u6301\u7684\u683c\u5f0f\uff0c\u7136\u540e\u624d\u80fd\u4f7f\u7528DeepGPU_LLM\u8fdb\u884c\u6a21\u578b\u7684\u63a8\u7406\u4f18\u5316\u670d\u52a1\u3002\u4ee5qwen-7b-chat\u4e3a\u4f8b\uff0c\u53ef\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5728\u5bb9\u5668\u4e2d\u8fdb\u884c\u6a21\u578b\u683c\u5f0f\u8f6c\u6362\uff1a #qwen-7b weight convert huggingface_qwen_convert \\ -in_file /llm-model/Qwen-7B-Chat \\ -saved_dir /llm-model/qwen-7b-chat-aiacc \\ -infer_gpu_num 1 \\ -weight_data_type fp16 \\ -model_name qwen-7b \u66f4\u6362\u6a21\u578b \u6b65\u9aa4\u4e00\uff1a\u521b\u5efa\u9759\u6001PV\u53caPVC OSS\u6a21\u578b \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efaSecret\u3002 kubectl create -f oss-secret.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efaSecret\u7684oss-secret.yaml\u793a\u4f8b\u6587\u4ef6\uff0c\u9700\u8981\u6307\u5b9aakId\u548cakSecret\u3002 apiVersion: v1 kind: Secret metadata: name: oss-secret namespace: default stringData: akId: <your AccessKeyID> akSecret: <your AccessKeySecret> \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u9759\u6001\u5377PV\u3002 kubectl create -f model-oss.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efa\u9759\u6001\u5377PV\u7684model-oss.yaml\u793a\u4f8b\u6587\u4ef6\uff0c\u9700\u8981\u6307\u5b9abucket,url\u7b49\u53c2\u6570\u3002 apiVersion: v1 kind: PersistentVolume metadata: name: model-oss labels: alicloud-pvname: model-oss spec: capacity: storage: 30Gi accessModes: - ReadOnlyMany persistentVolumeReclaimPolicy: Retain csi: driver: ossplugin.csi.alibabacloud.com volumeHandle: model-oss nodePublishSecretRef: name: oss-secret namespace: default volumeAttributes: bucket: \"<your bucket name>\" url: \"<your oss endpoint>\" # oss-cn-hangzhou.aliyuncs.com otherOpts: \"-o umask=022 -o max_stat_cache_size=0 -o allow_other\" path: \"/\" \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u9759\u6001\u5377PVC\u3002 kubectl create -f pvc-oss.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efa\u9759\u6001\u5377PVC\u7684model-pvc.yaml\u793a\u4f8b\u6587\u4ef6\u3002 apiVersion: v1 kind: PersistentVolumeClaim metadata: name: model-pvc spec: accessModes: - ReadOnlyMany resources: requests: storage: 30Gi selector: matchLabels: alicloud-pvname: model-oss \u53c2\u6570\u914d\u7f6e\u53ef\u53c2\u8003 \u4f7f\u7528OSS\u9759\u6001\u5b58\u50a8\u5377 \u3002 NAS\u6a21\u578b \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u9759\u6001\u5377PV\u3002 kubectl create -f model-nas.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efa\u9759\u6001\u5377PV\u7684model-nas.yaml\u793a\u4f8b\u6587\u4ef6\uff0c\u9700\u8981\u6307\u5b9aNAS\u670d\u52a1\u5730\u5740\u548c\u8def\u5f84\u3002 apiVersion: v1 kind: PersistentVolume metadata: name: model-nas labels: alicloud-pvname: model-nas spec: capacity: storage: 30Gi accessModes: - ReadWriteMany csi: driver: nasplugin.csi.alibabacloud.com volumeHandle: model-nas volumeAttributes: server: \"<your nas server>\" path: \"<your model path>\" mountOptions: - nolock,tcp,noresvport - vers=3 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u9759\u6001\u5377PVC\u3002 kubectl create -f model-pvc.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efa\u9759\u6001\u5377PVC\u7684model-pvc.yaml\u793a\u4f8b\u6587\u4ef6\u3002 kind: PersistentVolumeClaim apiVersion: v1 metadata: name: model-pvc spec: accessModes: - ReadWriteMany resources: requests: storage: 30Gi selector: matchLabels: alicloud-pvname: model-nas \u53c2\u6570\u914d\u7f6e\u53ef\u53c2\u8003 \u4f7f\u7528NAS\u9759\u6001\u5b58\u50a8\u5377 \u3002 \u6b65\u9aa4\u4e8c\uff1a\u66f4\u65b0Helm Value \u63a7\u5236\u53f0\u70b9\u51fb\u53d8\u914d\u670d\u52a1\u5b9e\u4f8b\u3002 \u9009\u62e9Chart Values\u53d8\u66f4 \u586b\u5199 Model \u4e3a\u65b0\u7684\u6a21\u578b\u540d\u79f0\uff0c \u6a21\u578bPVC \u4e3a\u5b58\u50a8\u65b0\u6a21\u578b\u7684pvc\u540d\u79f0\u3002\u6a21\u578b\u540d\u79f0\u53ca\u6a21\u578b\u6302\u8f7d\u8def\u5f84\u53c2\u8003\u652f\u6301\u7684\u6a21\u578b\u5217\u8868\u3002 Release Note \u7248\u672c\u53f7 \u53d8\u66f4\u65f6\u95f4 \u53d8\u66f4\u5185\u5bb9 0.1.0 2023\u5e7412\u670826\u65e5 \u652f\u6301\u963f\u91cc\u4e91\u63a8\u7406\u5f15\u64ceDeepGPU-LLM\uff0cAnalyticDB for PostgreSQL\u5411\u91cf\u6570\u4ed3","title":"Langchain-chatchat\u670d\u52a1\u90e8\u7f72\u6587\u6863"},{"location":"#langchain-chatchat","text":"","title":"Langchain-chatchat\u670d\u52a1\u90e8\u7f72\u6587\u6863"},{"location":"#_1","text":"Langchain-chatchat\u670d\u52a1\u57fa\u4e8e\u5f00\u6e90\u672c\u5730\u77e5\u8bc6\u5e93\u95ee\u7b54\u9879\u76ee Langchain-Chatchat , \u96c6\u6210\u4e86\u963f\u91cc\u4e91\u63a8\u7406\u5f15\u64ceDeepGPU-LLM\uff0cAnalyticDB for PostgreSQL\u5411\u91cf\u6570\u4ed3\u7b49\u4ea7\u54c1\uff0c\u5feb\u901f\u6784\u5efa\u68c0\u7d22\u589e\u5f3a\u751f\u6210(RAG)\u5927\u6a21\u578b\u77e5\u8bc6\u5e93\u9879\u76ee\u3002 \u672c\u6587\u5411\u60a8\u4ecb\u7ecd\u5982\u4f55\u5f00\u901a\u8ba1\u7b97\u5de2\u4e0a\u7684 Demo \u670d\u52a1\uff0c\u4ee5\u53ca\u90e8\u7f72\u6d41\u7a0b\u548c\u4f7f\u7528\u8bf4\u660e\u3002","title":"\u6982\u8ff0"},{"location":"#_2","text":"\u963f\u91cc\u4e91\u4e0d\u5bf9\u7b2c\u4e09\u65b9\u6a21\u578b\u7684\u5408\u6cd5\u6027\u3001\u5b89\u5168\u6027\u3001\u51c6\u786e\u6027\u8fdb\u884c\u4efb\u4f55\u4fdd\u8bc1\uff0c\u963f\u91cc\u4e91\u4e0d\u5bf9\u7531\u6b64\u5f15\u53d1\u7684\u4efb\u4f55\u635f\u5bb3\u627f\u62c5\u8d23\u4efb\u3002 \u60a8\u5e94\u81ea\u89c9\u9075\u5b88\u7b2c\u4e09\u65b9\u6a21\u578b\u7684\u7528\u6237\u534f\u8bae\u3001\u4f7f\u7528\u89c4\u8303\u548c\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u5e76\u5c31\u4f7f\u7528\u7b2c\u4e09\u65b9\u6a21\u578b\u7684\u5408\u6cd5\u6027\u3001\u5408\u89c4\u6027\u81ea\u884c\u627f\u62c5\u76f8\u5173\u8d23\u4efb\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"#_3","text":"Langchain-chatchat\u7531Nginx\u3001Chat\u53caLLM\u7ec4\u6210\u3002 Nginx\uff1a\u7f51\u5173\u670d\u52a1\uff0c\u8d1f\u8d23\u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230Chat\u670d\u52a1\u3002 Chat\uff1aChatBot\u5e94\u7528\uff0c\u652f\u6301LLM\u95ee\u7b54\u548c\u77e5\u8bc6\u5e93\u95ee\u7b54\u3002Database\u7528\u4e8e\u5b58\u50a8\u77e5\u8bc6\u5e93Embedding\u540e\u7684\u5411\u91cf\u3002Database\u652f\u6301 faiss \u53ca ADB \u4e24\u79cd\u7c7b\u578b\u3002 LLM\uff1a\u6a21\u578b\u63a8\u7406\u670d\u52a1\uff0c\u57fa\u4e8e\u5f00\u6e90\u7684FastChat\u9879\u76ee\u90e8\u7f72LLM\u6a21\u578b\u3002\u9ed8\u8ba4\u4f7f\u7528DeepGPU-LLM\u52a0\u901f\u63a8\u7406\u7684qwen-7b-chat-aiacc\u6a21\u578b\u3002\u652f\u6301\u66ff\u6362\u4e3a\u5176\u4ed6\u5f00\u6e90\u6a21\u578b\u6216DeepGPU-LLM\u52a0\u901f\u6a21\u578b\uff0c\u66ff\u6362\u6a21\u578b\u53ef\u901a\u8fc7pvc\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u3002","title":"\u90e8\u7f72\u67b6\u6784"},{"location":"#_4","text":"","title":"\u5e94\u7528\u914d\u7f6e"},{"location":"#_5","text":"\u53c2\u6570 \u63cf\u8ff0 \u9ed8\u8ba4\u503c ACK\u96c6\u7fa4ID ACK\u96c6\u7fa4ID \u65e0 \u6570\u636e\u5e93\u7c7b\u578b \u5411\u91cf\u6570\u636e\u5e93\u7c7b\u578b\u3002\u53d6\u503c\uff1afaiss or adb\u3002 faiss \u5e94\u7528\u767b\u9646\u540d Nginx\u767b\u9646\u540d\u79f0 admin \u5e94\u7528\u767b\u9646\u5bc6\u7801 Nginx\u767b\u9646\u5bc6\u7801 \u65e0 \u5e94\u7528\u767d\u540d\u5355 \u53ef\u4ee5\u8bbf\u95ee\u5e94\u7528\u7684IP\u6216\u8005CIDR\u7f51\u6bb5\u3002 127.0.0.1 \u6a21\u578b\u540d\u79f0 llm\u6a21\u578b\u540d\u79f0 qwen-7b-chat-aiacc \u662f\u5426\u4f7f\u7528\u91cf\u5316(8bit) llm\u6a21\u578bint8\u91cf\u5316 true \u6a21\u578bPVC \u6a21\u578b\u5b58\u50a8PVC\uff0c\u6302\u8f7d\u5230\u5bb9\u5668\u5185/llm-model\u76ee\u5f55 true \u77e5\u8bc6\u5e93PVC \u5df2\u5b58\u5728\u7684PVC\uff0c\u7528\u4e8e\u4fdd\u5b58\u672c\u5730\u77e5\u8bc6\u5e93\u6587\u4ef6\u3002\u5982\u4f7f\u7528 \u65e0 \u5b9e\u4f8b\u7c7b\u578b \u6a21\u578b\u63a8\u7406\u670d\u52a1\u90e8\u7f72\u65b9\u5f0f\uff0c\u53d6\u503c\uff1aecs or eci\u3002ecs\u5c06\u5e94\u7528\u90e8\u7f72\u5230ECS\u8282\u70b9\u4e0a\u3002eci\u5c06\u90e8\u7f72\u5230ECI\u4e0a\uff08ACK Serverless\u96c6\u7fa4\u8bf7\u4f7f\u7528eci\uff09\u3002 ecs","title":"\u90e8\u7f72\u53c2\u6570\u8bf4\u660e"},{"location":"#_6","text":"\u5e94\u7528\u767d\u540d\u5355\u9ed8\u8ba4\u503c\u4e3a127.0.0.1\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4fee\u6539\u3002","title":"\u4fee\u6539\u5e94\u7528\u767d\u540d\u5355"},{"location":"#_7","text":"\u521b\u5efa\u670d\u52a1\u65f6\u53ef\u4ee5\u6307\u5b9a\u5e94\u7528\u767d\u540d\u5355\u53c2\u6570\uff0c\u5efa\u8bae\u6dfb\u52a0\u672c\u673a\u516c\u7f51\u51fa\u53e3\u5730\u5740\uff08\u53ef\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95eeifconfig.me\u3001myip.ipip.net\u83b7\u53d6\uff09\uff0c\u5426\u5219\u672c\u673a\u5c06\u65e0\u6cd5\u8bbf\u95ee\u670d\u52a1\u3002","title":"\u65b0\u5efa\u670d\u52a1"},{"location":"#_8","text":"\u5982\u679c\u670d\u52a1\u5df2\u7ecf\u521b\u5efa\uff0c\u53ef\u4ee5\u5728\u670d\u52a1\u6982\u89c8\u9875\u9762 > \u5b9e\u4f8b\u4fe1\u606f\u70b9\u51fbSLBACL\u94fe\u63a5\u8fdb\u884c\u4fee\u6539\u3002SLBACL\u914d\u7f6e\u53ef\u53c2\u8003 \u8bbf\u95ee\u63a7\u5236 \u3002","title":"\u5df2\u6709\u670d\u52a1"},{"location":"#_9","text":"","title":"\u5411\u91cf\u6570\u636e\u5e93"},{"location":"#faiss","text":"faiss\u662f\u7531facebook\u5f00\u6e90\u7684\u4e00\u6b3e\u5185\u5b58\u5411\u91cf\u5e93\uff0c\u9879\u76ee\u5730\u5740 https://github.com/facebookresearch/faiss \u3002 faiss\u5185\u5b58\u6570\u636e\u5e93\u90e8\u7f72\u5728chat pod\u4e2d\uff0c\u53d7chat pod\u7684\u8d44\u6e90\u7ea6\u675f\u3002\u5982\u679c\u4f7f\u7528faiss\u5411\u91cf\u6570\u636e\u5e93\uff0c\u5efa\u8bae\u589e\u52a0chat pod\u7684\u5185\u5b58\u8d44\u6e90\u3002","title":"faiss"},{"location":"#analyticdb-postgresql-adb","text":"\u4e91\u539f\u751f\u6570\u636e\u4ed3\u5e93AnalyticDB PostgreSQL\u7248\u662f\u4e00\u79cd\u5927\u89c4\u6a21\u5e76\u884c\u5904\u7406\uff08MPP\uff09\u6570\u636e\u4ed3\u5e93\u670d\u52a1\uff0c\u53ef\u63d0\u4f9b\u6d77\u91cf\u6570\u636e\u5728\u7ebf\u5206\u6790\u670d\u52a1\u3002\u4ea7\u54c1\u7b80\u4ecb\u8bf7\u53c2\u8003\u6587\u6863 \u4ec0\u4e48\u662f\u4e91\u539f\u751f\u6570\u636e\u4ed3\u5e93 \u3002 Langchain-chatchat\u9879\u76ee\u4e2d\u4f7f\u7528\u7684ADB\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u9700\u5f00\u542f\u5411\u91cf\u5f15\u64ce\u4f18\u5316\u529f\u80fd \u8ba1\u7b97\u8282\u70b9\u89c4\u683c>=4C16G","title":"AnalyticDB PostgreSQL (\u7b80\u79f0 ADB)"},{"location":"#embedding","text":"\u5e94\u7528\u5185\u7f6e\u7684embedding\u6a21\u578b\u4e3atext2vec-bge-large-chinese\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003 hugging face\u6587\u6863 \u3002 chat\u5e94\u7528\u9ed8\u8ba4\u4f7f\u7528CPU\u8fd0\u884cembedding\u6a21\u578b\uff0c\u53ef\u901a\u8fc7\u5728 chat.pod.resources \u4e2d\u7533\u8bf7GPU\u8d44\u6e90\u6765\u63d0\u9ad8\u6587\u672c\u5411\u91cf\u5316\u901f\u5ea6\u3002","title":"embedding\u6a21\u578b"},{"location":"#_10","text":"","title":"\u6a21\u578b\u914d\u7f6e"},{"location":"#_11","text":"\u6a21\u578b\u7c7b\u578b \u6a21\u578b\u540d\u79f0 \u5bb9\u5668\u5185\u6a21\u578b\u6587\u4ef6\u8def\u5f84 DeepGPU-LLM\u8f6c\u6362\u6a21\u578b qwen-7b-chat-aiacc /llm-model/qwen-7b-chat-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b qwen-14b-chat-aiacc /llm-model/qwen-14b-chat-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b chatglm2-6b-aiacc /llm-model/chatglm2-6b-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b baichuan2-7b-chat-aiacc /llm-model/baichuan2-7b-chat-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b baichuan2-13b-chat-aiacc /llm-model/baichuan2-13b-chat-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b llama-2-7b-hf-aiacc /llm-model/llama-2-7b-hf-aiacc DeepGPU-LLM\u8f6c\u6362\u6a21\u578b llama-2-13b-hf-aiacc /llm-model/llama-2-13b-hf-aiacc \u5f00\u6e90\u6a21\u578b qwen-7b-chat /llm-model/Qwen-7B-Chat \u5f00\u6e90\u6a21\u578b qwen-14b-chat /llm-model/Qwen-14B-Chat \u5f00\u6e90\u6a21\u578b chatglm2-6b /llm-model/chatglm2-6b \u5f00\u6e90\u6a21\u578b chatglm2-6b-32k /llm-model/chatglm2-6b-32k \u5f00\u6e90\u6a21\u578b baichuan2-7b-chat /llm-model/Baichuan2-7B-Chat \u5f00\u6e90\u6a21\u578b baichuan2-13b-chat /llm-model/Baichuan2-13B-Chat \u5f00\u6e90\u6a21\u578b llama-2-7b-hf /llm-model/Llama-2-7b-hf \u5f00\u6e90\u6a21\u578b llama-2-13b-hf /llm-model/Llama-2-13b-hf","title":"\u652f\u6301\u7684\u6a21\u578b\u5217\u8868"},{"location":"#deepgpu-llm","text":"DeepGPU-LLM \u662f\u963f\u91cc\u4e91\u7814\u53d1\u7684\u57fa\u4e8eGPU\u4e91\u670d\u52a1\u5668\u7684\u5927\u8bed\u8a00\u6a21\u578b\uff08Large Language Model\uff0cLLM\uff09\u63a8\u7406\u5f15\u64ce\uff0c\u65e8\u5728\u4f18\u5316\u5927\u8bed\u8a00\u6a21\u578b\u5728GPU\u4e91\u670d\u52a1\u5668\u4e0a\u7684\u63a8\u7406\u8fc7\u7a0b\uff0c\u901a\u8fc7\u4f18\u5316\u548c\u5e76\u884c\u8ba1\u7b97\u7b49\u6280\u672f\u624b\u6bb5\uff0c\u63d0\u4f9b\u514d\u8d39\u7684\u9ad8\u6027\u80fd\u3001\u4f4e\u5ef6\u8fdf\u63a8\u7406\u670d\u52a1\u3002DeepGPU-LLM\u4f7f\u7528\u65b9\u5f0f\u8bf7\u53c2\u8003\u6587\u6863 \u4f7f\u7528DeepGPU-LLM\u5b9e\u73b0\u5927\u8bed\u8a00\u6a21\u578b\u5728GPU\u4e0a\u7684\u63a8\u7406\u4f18\u5316 \u3002 Langchain-chatchat\u9879\u76ee\u5df2\u5b89\u88c5DeepGPU-LLM\uff0c\u9ed8\u8ba4\u4f7f\u7528DeepGPU-LLM\u52a0\u901f\u540e\u7684\u6a21\u578bqwen-7b-chat-aiacc\u3002 \u5982\u60f3\u8981\u4f7f\u7528DeepGPU-LLM\u5bf9\u5176\u4ed6\u5f00\u6e90LLM\u6a21\u578b\u8fdb\u884c\u63a8\u7406\u4f18\u5316\uff0c\u60a8\u9700\u8981\u5148\u5c06huggingface\u683c\u5f0f\u7684\u5f00\u6e90\u6a21\u578b\u8f6c\u6362\u4e3aDeepGPU-LLM\u652f\u6301\u7684\u683c\u5f0f\uff0c\u7136\u540e\u624d\u80fd\u4f7f\u7528DeepGPU_LLM\u8fdb\u884c\u6a21\u578b\u7684\u63a8\u7406\u4f18\u5316\u670d\u52a1\u3002\u4ee5qwen-7b-chat\u4e3a\u4f8b\uff0c\u53ef\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5728\u5bb9\u5668\u4e2d\u8fdb\u884c\u6a21\u578b\u683c\u5f0f\u8f6c\u6362\uff1a #qwen-7b weight convert huggingface_qwen_convert \\ -in_file /llm-model/Qwen-7B-Chat \\ -saved_dir /llm-model/qwen-7b-chat-aiacc \\ -infer_gpu_num 1 \\ -weight_data_type fp16 \\ -model_name qwen-7b","title":"\u4f7f\u7528DeepGPU-LLM\u8f6c\u6362\u6a21\u578b"},{"location":"#_12","text":"","title":"\u66f4\u6362\u6a21\u578b"},{"location":"#pvpvc","text":"OSS\u6a21\u578b \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efaSecret\u3002 kubectl create -f oss-secret.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efaSecret\u7684oss-secret.yaml\u793a\u4f8b\u6587\u4ef6\uff0c\u9700\u8981\u6307\u5b9aakId\u548cakSecret\u3002 apiVersion: v1 kind: Secret metadata: name: oss-secret namespace: default stringData: akId: <your AccessKeyID> akSecret: <your AccessKeySecret> \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u9759\u6001\u5377PV\u3002 kubectl create -f model-oss.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efa\u9759\u6001\u5377PV\u7684model-oss.yaml\u793a\u4f8b\u6587\u4ef6\uff0c\u9700\u8981\u6307\u5b9abucket,url\u7b49\u53c2\u6570\u3002 apiVersion: v1 kind: PersistentVolume metadata: name: model-oss labels: alicloud-pvname: model-oss spec: capacity: storage: 30Gi accessModes: - ReadOnlyMany persistentVolumeReclaimPolicy: Retain csi: driver: ossplugin.csi.alibabacloud.com volumeHandle: model-oss nodePublishSecretRef: name: oss-secret namespace: default volumeAttributes: bucket: \"<your bucket name>\" url: \"<your oss endpoint>\" # oss-cn-hangzhou.aliyuncs.com otherOpts: \"-o umask=022 -o max_stat_cache_size=0 -o allow_other\" path: \"/\" \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u9759\u6001\u5377PVC\u3002 kubectl create -f pvc-oss.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efa\u9759\u6001\u5377PVC\u7684model-pvc.yaml\u793a\u4f8b\u6587\u4ef6\u3002 apiVersion: v1 kind: PersistentVolumeClaim metadata: name: model-pvc spec: accessModes: - ReadOnlyMany resources: requests: storage: 30Gi selector: matchLabels: alicloud-pvname: model-oss \u53c2\u6570\u914d\u7f6e\u53ef\u53c2\u8003 \u4f7f\u7528OSS\u9759\u6001\u5b58\u50a8\u5377 \u3002 NAS\u6a21\u578b \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u9759\u6001\u5377PV\u3002 kubectl create -f model-nas.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efa\u9759\u6001\u5377PV\u7684model-nas.yaml\u793a\u4f8b\u6587\u4ef6\uff0c\u9700\u8981\u6307\u5b9aNAS\u670d\u52a1\u5730\u5740\u548c\u8def\u5f84\u3002 apiVersion: v1 kind: PersistentVolume metadata: name: model-nas labels: alicloud-pvname: model-nas spec: capacity: storage: 30Gi accessModes: - ReadWriteMany csi: driver: nasplugin.csi.alibabacloud.com volumeHandle: model-nas volumeAttributes: server: \"<your nas server>\" path: \"<your model path>\" mountOptions: - nolock,tcp,noresvport - vers=3 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u9759\u6001\u5377PVC\u3002 kubectl create -f model-pvc.yaml \u4ee5\u4e0b\u4e3a\u521b\u5efa\u9759\u6001\u5377PVC\u7684model-pvc.yaml\u793a\u4f8b\u6587\u4ef6\u3002 kind: PersistentVolumeClaim apiVersion: v1 metadata: name: model-pvc spec: accessModes: - ReadWriteMany resources: requests: storage: 30Gi selector: matchLabels: alicloud-pvname: model-nas \u53c2\u6570\u914d\u7f6e\u53ef\u53c2\u8003 \u4f7f\u7528NAS\u9759\u6001\u5b58\u50a8\u5377 \u3002","title":"\u6b65\u9aa4\u4e00\uff1a\u521b\u5efa\u9759\u6001PV\u53caPVC"},{"location":"#helm-value","text":"\u63a7\u5236\u53f0\u70b9\u51fb\u53d8\u914d\u670d\u52a1\u5b9e\u4f8b\u3002 \u9009\u62e9Chart Values\u53d8\u66f4 \u586b\u5199 Model \u4e3a\u65b0\u7684\u6a21\u578b\u540d\u79f0\uff0c \u6a21\u578bPVC \u4e3a\u5b58\u50a8\u65b0\u6a21\u578b\u7684pvc\u540d\u79f0\u3002\u6a21\u578b\u540d\u79f0\u53ca\u6a21\u578b\u6302\u8f7d\u8def\u5f84\u53c2\u8003\u652f\u6301\u7684\u6a21\u578b\u5217\u8868\u3002","title":"\u6b65\u9aa4\u4e8c\uff1a\u66f4\u65b0Helm Value"},{"location":"#release-note","text":"\u7248\u672c\u53f7 \u53d8\u66f4\u65f6\u95f4 \u53d8\u66f4\u5185\u5bb9 0.1.0 2023\u5e7412\u670826\u65e5 \u652f\u6301\u963f\u91cc\u4e91\u63a8\u7406\u5f15\u64ceDeepGPU-LLM\uff0cAnalyticDB for PostgreSQL\u5411\u91cf\u6570\u4ed3","title":"Release Note"}]}